<!doctype html>
<html lang="en">
  <head>
    <title>FatihKidsTV - Tontonan Anak Islami</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
  </head>
  <body>
        <div id="app">
            <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
                <a class="navbar-brand" href="#">FatihKidsTV</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            
                <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Beranda<span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Tentang Kami</a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <main role="main" class="container-fluid">
                <div class="row">
                    <div class="col-md-4 video-container text-center" v-for="(video, idx) in videos">
                        <img v-bind:src="getThumbnailURL(video.id)" @click="playVideo(idx)" class="img-fluid"/>
                    </div>
                </div>
            </main><!-- /.container -->
      
            <!-- Modal -->
            <div class="modal fade" id="modal_video_player" tabindex="-1" role="dialog" aria-labelledby="modal_video_player" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">{{ currentVideo.title }}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item" v-bind:src="getVideoURL(currentVideo.id)" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="assets/js/jquery-3.2.1.slim.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/vue.js"></script>
        <script>
            var app = new Vue({
                el: '#app',
                data: {
                    currentVideo: {id: '', title: '', by: ''},
                    videos: [
                        {id: "4KzBLpQ1LmU", title: "Yufid Kids - Doa Berbuka Puasa", by: "Yufid.TV"}, 
                        {id: "ZTPNzYKRvmw", title: "Yufid Kids - Doa Bangun Tidur", by: "Yufid.TV"},
                        {id: "ywpHWx-l500", title: "Yufid Kids - Mengenal Angka: 1 - 5", by: "Yufid.TV"}, 
                        {id: "w-OFnyJbSRw", title: "Yufid Kids - Mengenal Angka: 6 - 10", by: "Yufid.TV"}, 
                        {id: "okQggW16h44", title: "Bincang Ringan Angkringan - Pilih Kiri atau Kanan?", by: "Yufid.TV"}, 
                        {id: "knZ9Tj3vAo0", title: "Bincang Ringan Angkringan - Dzikir Saat Jalan Naik & Turun", by: "Yufid.TV"},
                        {id: "PeBPkYEXVJk", title: "Bincang Ringan Angkringan - Takut Setan?", by: "Yufid.TV"},
                        {id: "AQF_MBQCrNs", title: "Saudaraku - Maen PS, Apa Bisa Jadi Haram?", by: "Yufid.TV"},
                        {id: "0W1WJFZ5SsU", title: `Saudaraku - Budaya "Ngepek"`, by: "Yufid.TV"},
                    ]
                },
                methods: {
                    getVideoURL(videoId){
                        if (videoId) { 
                            return `https://www.youtube.com/embed/${videoId}?rel=0&autoplay=1&showinfo=0`
                        }
                        return ''
                    },
                    getThumbnailURL(videoId){
                        return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`
                    },
                    playVideo(idx){
                        this.currentVideo = this.videos[idx]
                        $('#modal_video_player').modal('show')
                    }
                }
            })

            // register event for stopping playing video once modal closed
            // the idea to stop the video is to change the iframe src to empty url
            $('#modal_video_player').on('hide.bs.modal', function(){
               app.currentVideo = {id: '', title: '', by: ''}
            })
        </script>
  </body>
</html>